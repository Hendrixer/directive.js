var DirectiveContainer=function(){function n(n,t){if(null!=n)if(null!=n.length)for(var e=0;e<n.length;e++)t(n[e],e);else for(var e in n)n.hasOwnProperty(e)&&t(n[e],e)}function t(n){var t=n.getAttribute(u);return null!=t&&t>=0}function e(n,t){null!=t?n.setAttribute(u,t):n.removeAttribute(u)}function r(n){return n.replace(/-./g,function(n){return n.charAt(1).toUpperCase()})}function i(t){var e={};return n(t.attributes,function(n){var t=n.name;if(t&&t.length){var i=n.value;void 0!==i&&(e[r(t)]=i)}}),e}var u="data-directive-id",c=function(r){function c(n){return p.push(n),function(){var t=p[n];p.splice(t,1)}}function o(){n(p,function(n){n()})}function s(t){var e={};return{$events:{},$watchers:[],on:function(n,t){l[n]=l[n]||[],l[n].push(this),this.$events[n]=this.$events[n]||[],this.$events[n].push(t)},observe:function(n,r){var i=c(function(){var i=e[n],u=t.getAttribute(n);i!==u&&(e[n]=u,r(u,i))});this.$watchers.push(i)},destroy:function(){n(this.$watchers,function(n){n()}),f(this,"destroy")}}}function f(t,e,r){var i=t.$events[e]||[];n(i,function(n){n(r)})}r=r||document.body;var a,v={},h=[],l={},p=[];return a={register:function(n,t){v[n]=v[n]||[],v[n].push(t)},list:function(){var t=[];return n(v,function(e,r){n(e,function(n){t.push([r,n])})}),t},scan:function(t){t=t||function(){return!0};var e=[];return n(v,function(i,u){n(r.querySelectorAll(u),function(r){t(r)&&n(i,function(n){e.push([r,n])})})}),e},compile:function(){function r(n){return!t(n)}n(a.scan(r),function(n){var t=n[0],r=n[1],u=s(t),c=h.length;r.call(u,t,i(t)),h.push(u),e(t,c)}),a.checkObservers()},decompile:function(){n(a.scan(t),function(n){var t=n[0],r=t.getAttribute(u),i=h[r];i.destroy(),h.splice(r,1),e(t,void 0)})},update:function(n){a.decompile(r),a.trigger(r,"update"),"string"==typeof n?r.innerHTML=n:(r.innerHTML="",r.appendChild(n)),a.compile(r)},trigger:function(t,e){n(l[t]||[],function(n){f(n,t,e)})},attr:function(n,t,e){n.setAttribute(t,e),a.checkObservers()},checkObservers:function(){o()}}};return c}();